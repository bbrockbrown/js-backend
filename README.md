# Backend Template

_2026 Discover Program Project Templates_

This template was created by the DISC tech leads of 2025-2026:

- [Brock Brown](https://www.linkedin.com/in/bbrockbrown/)
- [Vihaan Shah](https://www.linkedin.com/in/shah-vihaan/)
- [Christian Lee](https://www.linkedin.com/in/christian-lee-b429032a9/)

Check out DISC:

- [Website](https://www.discnu.org/)
- [Github](https://github.com/DISC-NU)
- [DISCord](https://discord.gg/mqRQ7s9CyS)
- [Email](disc@u.northwestern.edu)

## Stack
Firebase Authentication + MySQL (Amazon RDS) backend template.
- **Runtime**: Node.js with ES Modules
- **Framework**: Express.js
- **Authentication**: Firebase Auth (Email/Password + Google OAuth)
- **Database**: MySQL on Amazon RDS
- **Database Client**: mysql2 (connection pool, raw SQL with parameterized queries)
- **Language**: JavaScript (ES Modules)

## Quick Start

```bash
# Install dependencies
npm install

# Set up environment
cp .env.example .env
# Edit .env with your Firebase credentials

# Set up database config
cp rds-config.ini.example rds-config.ini
# Edit rds-config.ini with your RDS credentials

# Create tables on your RDS instance
mysql -h <endpoint> -u <user> -p <dbname> < sql/create_tables.sql

# Start development server
npm run dev
```

See [SETUP_GUIDE.md](SETUP_GUIDE.md) for full setup instructions.

## API Endpoints

- `POST /auth/signup` - Create new user
- `POST /auth/login` - Login with Firebase ID token
- `GET /auth/me` - Get current user
- `GET /auth/profile` - Get current user (alias for `/me`)
- `GET /auth/users` - Get all users (protected)
- `POST /auth/logout` - Logout
- `POST /auth/token` - Sync Firebase OAuth user to MySQL

## Scripts

```bash
npm run dev    # Start development server
npm run lint   # Run ESLint
```

## Editor Setup (VSCode)

When you open this project in VSCode, it will automatically prompt you to
install the recommended extensions from `.vscode/extensions.json`. Click
**Install** on the notification, or install them manually:

1. [Prettier ESLint](https://marketplace.visualstudio.com/items?itemName=rvest.vs-code-prettier-eslint)
   (`rvest.vs-code-prettier-eslint`) — formats your code using both Prettier
   and ESLint rules on every save
2. [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)
   (`dbaeumer.vscode-eslint`) — shows lint errors and warnings inline as you
   type

Once both are installed, **restart VSCode completely (quit and reopen)**. Every
file save will automatically format and lint your code. Format-on-save is
configured in `.vscode/settings.json` — do not edit this file.

To manually format all files at once:

```bash
npx prettier . --write
```

## Configuration

This project uses two config sources:

- **`.env`** - Firebase credentials, CORS, port, environment. See [.env.example](.env.example).
- **`rds-config.ini`** - RDS database connection. See [rds-config.ini.example](rds-config.ini.example).

Required `.env` variables:
- `FIREBASE_SERVICE_ACCOUNT_KEY` - Firebase service account JSON
- `PORT` - Server port (default: 5050)
- `FRONTEND_URL` - Production frontend URL for CORS
- `FRONTEND_URL_DEV` - Development frontend URL for CORS
- `NODE_ENV` - Environment (development/production)

## Project Structure

```
js-backend/
├── sql/
│   └── create_tables.sql      # MySQL schema
├── src/
│   ├── config/
│   │   ├── firebase.js        # Firebase Admin SDK
│   │   └── database.js        # MySQL connection pool
│   ├── controllers/
│   │   └── authController.js  # Authentication logic
│   ├── middleware/
│   │   └── authMiddleware.js  # JWT verification
│   ├── routes/
│   │   └── authRoutes.js      # API routes
│   └── server.js              # Express app
├── .env.example               # Environment template
├── rds-config.ini.example     # RDS config template
└── package.json
```